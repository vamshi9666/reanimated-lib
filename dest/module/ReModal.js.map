{"version":3,"sources":["ReModal.tsx"],"names":["React","Component","StyleSheet","Dimensions","Animated","Easing","get","height","Value","cond","eq","set","timing","Clock","clockRunning","startClock","stopClock","block","interpolate","Extrapolate","runTiming","clock","value","dest","state","finished","position","time","frameTime","config","duration","toValue","easing","inOut","ease","Effect","ReanimatedModal","props","modalTranslateY","shadowOpacity","fromCoordinate","toCoordinate","effect","SLIDE_FROM_BOTTOM","setValue","SLIDE_FROM_TOP","showModal","callbackNode","inputRange","outputRange","extrapolate","CLAMP","absoluteFillObject","backgroundColor","opacity","styles","container","transform","translateY","create","marginHorizontal","flex","marginVertical"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { StyleSheet, Dimensions } from \"react-native\";\nimport Animated, { Easing } from \"react-native-reanimated\";\nimport {} from \"react-native-gesture-handler\";\nconst { height } = Dimensions.get(\"window\");\nconst {\n  Value,\n  cond,\n  eq,\n  set,\n  timing,\n  Clock,\n  clockRunning,\n  startClock,\n  stopClock,\n  block,\n  interpolate,\n  Extrapolate\n} = Animated;\n\nfunction runTiming({\n  clock,\n  value,\n  dest\n}: {\n  clock: any;\n  value: any;\n  dest: any;\n}) {\n  // const clock = new Clock();\n  const state = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0)\n  };\n\n  const config = {\n    duration: 350,\n\n    toValue: new Value(0),\n    easing: Easing.inOut(Easing.ease)\n  };\n\n  return block([\n    cond(\n      clockRunning(clock),\n      [set(config.toValue, dest)],\n      [\n        set(state.finished, 0),\n        set(state.time, 0),\n        set(state.position, value),\n        set(state.frameTime, 0),\n        set(config.toValue, dest),\n        startClock(clock)\n      ]\n    ),\n    timing(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position\n  ]);\n}\n\nexport enum Effect {\n  SLIDE_FROM_BOTTOM = 1,\n  SLIDE_FROM_TOP = 2\n  // SLIDE_FROM_LEFT = 3,\n  // SLIDE_FROM_RIGHT = 4\n}\ninterface IProps {\n  visible: Boolean;\n  callbackNode: Animated.Value<number>;\n  fromDirection?: String;\n  showModal: Animated.Adaptable<number>;\n  effect: Effect;\n}\ninterface IState {}\nclass ReanimatedModal extends Component<IProps, IState> {\n  private modalTranslateY: Animated.Value<number> = new Value(height);\n  // private progress: Animated.Value<number> = new Value(0);\n  private shadowOpacity: Animated.Value<number> = new Value(0);\n  private fromCoordinate: Animated.Value<number> = new Value();\n  private toCoordinate: Animated.Value<number> = new Value(0);\n\n  private clock = new Clock();\n  constructor(props: IProps) {\n    super(props);\n    this.state = {};\n    if (props.effect === Effect.SLIDE_FROM_BOTTOM) {\n      this.fromCoordinate.setValue(height);\n      this.modalTranslateY.setValue(height);\n    } else if (this.props.effect === Effect.SLIDE_FROM_TOP) {\n      this.fromCoordinate.setValue(-height);\n      this.modalTranslateY.setValue(-height);\n      // private toCoordinate = new Value(0);\n    }\n  }\n\n  render() {\n    const { showModal } = this.props;\n    return (\n      <>\n        <Animated.Code>\n          {() =>\n            block([\n              // debug(\"callback node is \", showModal),\n              // onChange(\n              // this.modalTranslateY,\n              set(\n                this.props.callbackNode,\n                interpolate(this.modalTranslateY, {\n                  inputRange: [this.fromCoordinate, this.toCoordinate],\n                  outputRange: [1, 0],\n                  extrapolate: Extrapolate.CLAMP\n                })\n                // )\n              ),\n              set(\n                this.shadowOpacity,\n                interpolate(this.modalTranslateY, {\n                  inputRange: [this.fromCoordinate, this.toCoordinate],\n                  outputRange: [0, 1],\n                  extrapolate: Extrapolate.CLAMP\n                })\n                // )\n              ),\n              cond(eq(showModal, 1), [\n                set(\n                  this.modalTranslateY,\n                  runTiming({\n                    clock: this.clock,\n                    value: this.modalTranslateY,\n                    dest: this.toCoordinate\n                  })\n                )\n              ]),\n              cond(eq(showModal, 2), [\n                set(\n                  this.modalTranslateY,\n                  runTiming({\n                    clock: this.clock,\n                    value: this.modalTranslateY,\n                    dest: this.fromCoordinate\n                  })\n                )\n              ])\n            ])\n          }\n        </Animated.Code>\n        <Animated.View\n          style={{\n            ...StyleSheet.absoluteFillObject,\n            backgroundColor: \"#000\",\n            opacity: this.shadowOpacity\n          }}\n        />\n\n        <Animated.View\n          style={{\n            ...styles.container,\n            transform: [{ translateY: this.modalTranslateY as any }]\n          }}\n        ></Animated.View>\n      </>\n    );\n  }\n}\n\nexport default ReanimatedModal;\n\nconst styles = StyleSheet.create({\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    marginHorizontal: 32,\n    flex: 1,\n    marginVertical: 100,\n    // height: 300,\n    backgroundColor: \"red\"\n  }\n});\n"]}